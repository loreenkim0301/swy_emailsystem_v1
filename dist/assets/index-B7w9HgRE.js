(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();let m=null;function I(){const s="https://fuydyfeeskrzpmeqdiah.supabase.co",e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ1eWR5ZmVlc2tyenBtZXFkaWFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NDYzNDIsImV4cCI6MjA2NjMyMjM0Mn0.TnIfkqE0AYNHK0xyHrsdrLChHAljEw3S3vmRsZM2T6M";try{return m=supabase.createClient(s,e),console.log("âœ… Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ"),!0}catch(t){return console.error("âŒ Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨:",t),!1}}async function p(s){if(!m)throw new Error("Supabase í´ë¼ì´ì–¸íŠ¸ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");try{const{data:e,error:t}=await m.from("subscribers").select("id, status").eq("email",s).maybeSingle();if(t)throw t;if(e){if(e.status==="active")return{success:!1,message:"ì´ë¯¸ êµ¬ë… ì¤‘ì¸ ì´ë©”ì¼ ì£¼ì†Œì…ë‹ˆë‹¤."};{const{error:n}=await m.from("subscribers").update({status:"active",updated_at:new Date().toISOString()}).eq("email",s);if(n)throw n;return{success:!0,message:"ë‹¤ì‹œ êµ¬ë…í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë°”ì´ë¸Œì½”ë“œì œë¡œ í´ëŸ½ì˜ ìµœì‹  ì†Œì‹ì„ ë°›ì•„ë³´ì„¸ìš”."}}}const{data:i,error:o}=await m.from("subscribers").insert([{email:s,source:"emailjs-learning-tool",status:"active"}]).select().single();if(o)throw o;return console.log(`âœ… ìƒˆ êµ¬ë…ì ì¶”ê°€: ${s}`),{success:!0,message:"êµ¬ë…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ë°”ì´ë¸Œì½”ë“œì œë¡œ í´ëŸ½ì˜ ìµœì‹  ì†Œì‹ì„ ë°›ì•„ë³´ì„¸ìš”.",subscriber_id:i.id}}catch(e){throw console.error("êµ¬ë… ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:",e),new Error("êµ¬ë… ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}}let a=null,E=!1,b=!1;document.addEventListener("DOMContentLoaded",function(){console.log("í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ"),b=I(),setTimeout(()=>{h()},500)});function h(){const s=document.getElementById("debugInfo"),e=document.getElementById("debugText");if(s.classList.remove("hidden"),typeof emailjs>"u")return e.innerHTML="âŒ EmailJS ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ì‹¤íŒ¨<br>ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.",document.getElementById("troubleshoot").classList.remove("hidden"),!1;{let t="âœ… EmailJS ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ì™„ë£Œ<br>ì¤€ë¹„ ìƒíƒœ: ì •ìƒ<br>ğŸ”’ ë³´ì•ˆ: ëª¨ë“  ì •ë³´ëŠ” ë©”ëª¨ë¦¬ì—ì„œë§Œ ì²˜ë¦¬ë©ë‹ˆë‹¤";return b?t+="<br>âœ… Supabase ì—°ê²° ì™„ë£Œ (êµ¬ë… ê¸°ëŠ¥ í™œì„±í™”)":t+="<br>âš ï¸ Supabase ì—°ê²° í•„ìš” (êµ¬ë… ê¸°ëŠ¥ ë¹„í™œì„±í™”)",e.innerHTML=t,!0}}window.saveAndTestConfig=function(){const s=document.getElementById("publicKey").value.trim(),e=document.getElementById("serviceId").value.trim(),t=document.getElementById("templateId").value.trim(),i=document.getElementById("toEmail").value.trim();if(!s||!e||!t||!i){c("configStatus","ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”! âš ï¸","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){c("configStatus","ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”! âš ï¸","error");return}if(typeof emailjs>"u"){c("configStatus","âŒ EmailJS ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.","error"),document.getElementById("troubleshoot").classList.remove("hidden");return}a={publicKey:s,serviceId:e,templateId:t,toEmail:i},S()};function S(){if(!(!a||typeof emailjs>"u"))try{emailjs.init({publicKey:a.publicKey,blockHeadless:!0,limitRate:{id:"app",throttle:1e4}}),E=!0,console.log("EmailJS ì´ˆê¸°í™” ì™„ë£Œ"),B(),v()}catch(s){console.error("EmailJS ì´ˆê¸°í™” ì‹¤íŒ¨:",s),c("configStatus","âŒ EmailJS ì´ˆê¸°í™” ì‹¤íŒ¨: "+s.message,"error"),document.getElementById("troubleshoot").classList.remove("hidden")}}function B(){c("configStatus","âœ… ì„¤ì •ì´ ì €ì¥ë˜ê³  EmailJSê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤! (ë©”ëª¨ë¦¬ì—ì„œë§Œ ì²˜ë¦¬ë¨)","success"),document.getElementById("configDisplay").classList.remove("hidden"),document.getElementById("configText").textContent=`Public Key: ${a.publicKey.substring(0,10)}...
Service ID: ${a.serviceId}
Template ID: ${a.templateId}
To Email: ${a.toEmail}`,document.getElementById("step1").classList.add("completed"),document.getElementById("step1").classList.remove("active"),document.getElementById("troubleshoot").classList.add("hidden")}function v(){document.getElementById("step2").classList.add("active"),document.getElementById("connectionWaiting").classList.add("hidden"),document.getElementById("connectionTest").classList.remove("hidden")}window.testConnection=function(){if(!E){c("testStatus","âŒ EmailJSê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. 1ë‹¨ê³„ë¥¼ ë‹¤ì‹œ ì™„ë£Œí•´ì£¼ì„¸ìš”.","error");return}c("testStatus","ğŸ”„ ì—°ê²°ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì¤‘...","info");const s={name:"í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì",email:"test@example.com",subject:"EmailJS ì—°ê²° í…ŒìŠ¤íŠ¸",message:"EmailJS í•™ìŠµ ë„êµ¬ì—ì„œ ë³´ë‚´ëŠ” ì—°ê²° í…ŒìŠ¤íŠ¸ ë©”ì¼ì…ë‹ˆë‹¤. ì´ ë©”ì¼ì´ ë„ì°©í–ˆë‹¤ë©´ ì„¤ì •ì´ ì˜¬ë°”ë¦…ë‹ˆë‹¤!"};console.log("ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹œì‘:",{serviceId:a.serviceId,templateId:a.templateId,data:s}),emailjs.send(a.serviceId,a.templateId,s).then(function(e){console.log("ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ!",e),a.connectionTested=!0,L(),w()}).catch(function(e){console.error("ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:",e);let t="ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ";e.status===400?t+="ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤. í…œí”Œë¦¿ IDë‚˜ ì„œë¹„ìŠ¤ IDë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.":e.status===401?t+="ì¸ì¦ ì‹¤íŒ¨ì…ë‹ˆë‹¤. Public Keyë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.":e.status===404?t+="í…œí”Œë¦¿ì´ë‚˜ ì„œë¹„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. IDë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.":t+=e.text||e.message||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜",c("testStatus","âŒ "+t,"error"),document.getElementById("troubleshoot").classList.remove("hidden")})};function L(){c("testStatus","âœ… ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ! EmailJSê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.","success"),document.getElementById("step2").classList.add("completed"),document.getElementById("step2").classList.remove("active")}function w(){document.getElementById("step3").classList.add("active"),document.getElementById("emailWaiting").classList.add("hidden"),document.getElementById("emailForm").classList.remove("hidden")}window.sendEmail=function(){const s=document.getElementById("senderName").value.trim(),e=document.getElementById("senderEmail").value.trim(),t=document.getElementById("subject").value.trim(),i=document.getElementById("message").value.trim();if(!s||!e){c("emailStatus","ë³´ë‚´ëŠ” ì‚¬ëŒ ì´ë¦„ê³¼ ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤! âš ï¸","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){c("emailStatus","ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”! âš ï¸","error");return}const n=document.getElementById("sendBtn"),d=document.getElementById("sendBtnText"),y=document.getElementById("sendBtnLoading");n.disabled=!0,d.classList.add("hidden"),y.classList.remove("hidden");const f={name:s,email:e};t&&(f.subject=t),i&&(f.message=i),console.log("ì´ë©”ì¼ ë°œì†¡ ì‹œì‘:",f);let g="ğŸ“§ ì´ë©”ì¼ ë°œì†¡ ì¤‘...";!t&&!i?g+=" (ì œëª©ê³¼ ë‚´ìš©ì€ í…œí”Œë¦¿ ê¸°ë³¸ê°’ ì‚¬ìš©)":t?i||(g+=" (ë‚´ìš©ì€ í…œí”Œë¦¿ ê¸°ë³¸ê°’ ì‚¬ìš©)"):g+=" (ì œëª©ì€ í…œí”Œë¦¿ ê¸°ë³¸ê°’ ì‚¬ìš©)",c("emailStatus",g,"info"),emailjs.send(a.serviceId,a.templateId,f).then(function(r){console.log("ì´ë©”ì¼ ë°œì†¡ ì„±ê³µ!",r);let l="âœ… ì´ë©”ì¼ì´ ì„±ê³µì ìœ¼ë¡œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!";!t&&!i?l+=`
ğŸ“ ì œëª©ê³¼ ë‚´ìš©ì€ EmailJS í…œí”Œë¦¿ì˜ ê¸°ë³¸ê°’ì´ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.`:t?i||(l+=`
ğŸ“ ë‚´ìš©ì€ EmailJS í…œí”Œë¦¿ì˜ ê¸°ë³¸ê°’ì´ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.`):l+=`
ğŸ“ ì œëª©ì€ EmailJS í…œí”Œë¦¿ì˜ ê¸°ë³¸ê°’ì´ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.`,c("emailStatus",l,"success"),document.getElementById("step3").classList.add("completed")}).catch(function(r){console.error("ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨:",r);let l="ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨: ";r.status===400?l+="ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤. ì…ë ¥ ë‚´ìš©ì„ í™•ì¸í•´ì£¼ì„¸ìš”.":r.status===401?l+="ì¸ì¦ ì‹¤íŒ¨ì…ë‹ˆë‹¤. ì„¤ì •ì„ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.":r.status===429?l+="ë„ˆë¬´ ë§ì€ ìš”ì²­ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.":l+=r.text||r.message||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜",c("emailStatus","âŒ "+l,"error")}).finally(function(){n.disabled=!1,d.classList.remove("hidden"),y.classList.add("hidden")})};window.handleSubscription=async function(){const s=document.getElementById("subscriptionEmail").value.trim(),e=document.getElementById("subscribeBtn"),t=document.getElementById("subscribeBtnText"),i=document.getElementById("subscribeBtnLoading");if(!s||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){u("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.","error");return}if(!b){u("Supabase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.","error");return}e.disabled=!0,t.classList.add("hidden"),i.classList.remove("hidden");try{const n=await p(s);n.success?(u(n.message,"success"),document.getElementById("subscriptionEmail").value=""):u(n.message,"error")}catch(n){console.error("êµ¬ë… ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:",n),u(n.message,"error")}finally{e.disabled=!1,t.classList.remove("hidden"),i.classList.add("hidden")}};function u(s,e){const t=document.getElementById("subscriptionStatus");t.textContent=s,t.className=`subscription-status ${e}`,t.style.display="block",setTimeout(()=>{t.style.display="none"},5e3)}function c(s,e,t){const i=document.getElementById(s);i.textContent=e,i.className=`status-message ${t}`,i.style.display="block",t==="success"&&setTimeout(()=>{i.style.display="none"},7e3)}window.addEventListener("beforeunload",function(s){if(a){const e="í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì…ë ¥í•œ ëª¨ë“  ì„¤ì •ì´ ì‚­ì œë©ë‹ˆë‹¤.";return s.returnValue=e,e}});document.getElementById("subscriptionEmail").addEventListener("keypress",function(s){s.key==="Enter"&&handleSubscription()});
